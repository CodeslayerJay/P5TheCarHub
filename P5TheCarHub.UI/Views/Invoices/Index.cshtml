@model InvoiceIndexViewModel
@{
    ViewData["Title"] = "Inventory Management";
    Layout = "~/Views/Shared/_ManageLayout.cshtml";
}

<div class="col-12 m-auto pt-3">

    <div class="row">
        <div class="col-8">
            <h4>Invoices <small class="text-muted" style="font-size: 16px;">(<a asp-action="Index" asp-controller="Invoices">View All</a>)</small></h4>
        </div>
        <div class="col-4">
            <form class="form-inline my-2" asp-action="Index" asp-controller="Invoices" method="get">
                <div class="form-group">
                    <input type="text" class="form-control mr-sm-2" placeholder="Search Customer" name="search" />
                    <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
                </div>
            </form>
        </div>
        <table class="table table-striped mt-1 table-bordered">
            <thead class="thead-dark" style="font-size: 14px; font-weight: 300;">
                <tr>
                    <th>Invoice #</th>
                    <th>VIN</th>
                    <th>Vehicle</th>
                    <th>Customer Name</th>
                    <th>Price Sold</th>
                    <th>Date Sold</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                @foreach (var invoice in Model.Invoices)
                {
                    <tr>
                        <td>@invoice.InvoiceNumber</td>
                        <td>@invoice.Car.VIN</td>
                        <td>@invoice.Car.Year  @invoice.Car.Make  @invoice.Car.Model @invoice.Car.Trim</td>
                        <td>@invoice.CustomerName</td>
                        <td>@invoice.PriceSold.ToString("c")</td>
                        <td>@invoice.DateSold.ToShortDateString()</td>
                        <td>
                            <div class="float-right">
                                <a asp-action="Edit" asp-controller="Invoices" asp-route-id="@invoice.Id">Edit</a> |
                                <a asp-action="Details" asp-controller="Cars" asp-route-id="@invoice.CarId">View Vehicle</a>
                            </div>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
        @if(Model.Pagination.TotalPages > 1)
        {
        <nav aria-label="Page navigation example">
            <ul class="pagination">
                <li class="page-item">
                    <a class="page-link" asp-ation="Index" asp-route-page="1">First Page</a>
                </li>
                <li class="page-item">
                    <a class="page-link" asp-ation="Index" asp-route-page="@Model.Pagination.PrevPage">Prev</a>
                </li>
                <li class="page-item">
                    <a class="page-link" asp-ation="Index" asp-route-page="@Model.Pagination.NextPage">Next</a>
                </li>
                <li class="page-item">
                    <a class="page-link" asp-ation="Index" asp-route-page="@Model.Pagination.LastPage">Last Page</a>
                </li>
            </ul>
        </nav>
        }
        
    </div>

</div>