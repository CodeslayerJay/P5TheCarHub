@model InventoryViewModel
@{
    ViewData["Title"] = "Cars For Sale";
}

<h3 class="display-4 pl-3">Inventory</h3>

<div class="row">
    <div class="col-lg-6">
        <form asp-action="Index" method="get">
            <div class="form-group col-md-10">

                <select name="type" asp-for="VehicleTypeFilter" asp-items="Html.GetEnumSelectList<CarType>()" class="form-control-sm p-1">
                    <option selected="selected">Vehicle Type</option>
                </select>
                <select name="minPrice" class="form-control-sm p-1">
                    <option value="500" selected="selected">Minimum Price</option>
                    <option value="2000">$2,000</option>
                    <option value="5000">$5,000</option>
                    <option value="10000">$10,000</option>
                </select>
                <button type="submit" class="btn btn-sm btn-primary">Filter Vehicle</button>
                @if (Model.IsFilterApplied)
                {
                    <a asp-action="Index" asp-controller="Inventory" class="ml-3">View All</a>
                }
            </div>

        </form>
    </div>
    <div class="col-12 m-auto row">
        @if (Model.Cars.Any())
        {
            @foreach (var car in Model.Cars)
            {
                <div class="col-lg-4">
                    <div class="card mb-3">
                        <div class="m-auto">
                            <a asp-action="Details" asp-controller="Inventory" asp-route-id="@car.CarId">
                                @if (car.MainPhoto != null)
                                {

                                    <img style="height: 200px; width: 300px; display: block;" src="@car.MainPhoto.ImageUrl" alt="Car image">

                                }
                                else
                                {

                                    <img style="height: 200px; width: 300px; display: block;" src="~/img/car-suv-blank.png" alt="Car image">

                                }
                            </a>
                        </div>

                        <div class="card-body">
                            <h5 class="card-title">@car.FullCarName</h5>
                            <h6 class="card-subtitle text-muted">@car.Mileage.ToString() mile(s)</h6>
                        </div>

                        <div class="card-body">
                            @if (!car.IsSold)
                            {
                                <h2>@car.SalePrice.ToString("c")</h2>
                            }
                            else
                            {
                                <h2>SOLD</h2>
                            }

                        </div>
                        <ul class="list-group list-group-flush">
                            @if (!String.IsNullOrWhiteSpace(car.Color))
                            {
                                <li class="list-group-item">@car.Color</li>
                            }

                            <li class="list-group-item">@car.Type</li>
                            <li class="list-group-item">VIN: @car.VIN</li>
                        </ul>
                        @if (!car.IsSold)
                        {
                            <div class="card-body">
                                <a asp-action="Details" asp-controller="Inventory" asp-route-id="@car.CarId" class="card-link">
                                    <i class="fa fa-list"></i> Details
                                </a>
                                <a asp-action="Contact" asp-controller="Home" asp-route-vehicleId="@car.CarId" class="card-link">
                                    <i class="fa fa-envelope"></i> Contact
                                </a>
                            </div>
                        }

                        <div class="card-footer text-muted">
                            @car.LotDate.ToShortDateString()
                        </div>
                    </div>

                </div>

            }
        }
    </div>
    @if (Model.Pagination.TotalPages > 1)
    {
        <div class="row">
            <nav aria-label="Page navigation example">
                <ul class="pagination">
                    <li class="page-item">
                        <a class="page-link" asp-ation="Index" asp-route-page="1">First Page</a>
                    </li>
                    <li class="page-item">
                        <a class="page-link" asp-ation="Index" asp-route-page="@Model.Pagination.PrevPage">Prev</a>
                    </li>



                    <li class="page-item">
                        <a class="page-link" asp-ation="Index" asp-route-page="@Model.Pagination.NextPage">Next</a>
                    </li>
                    <li class="page-item">
                        <a class="page-link" asp-ation="Index" asp-route-page="@Model.Pagination.LastPage">Last Page</a>
                    </li>
                </ul>
            </nav>
        </div>
    }

</div>