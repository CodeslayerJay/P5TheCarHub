@model CarIndexViewModel
@{

    Layout = "~/Views/Shared/_ManageLayout.cshtml";
}

<div class="col-12 m-auto pt-3">

    <div class="row">
        <div class="col-8 my-2">
            <h4>Car Inventory <small class="text-muted" style="font-size: 16px;">(<a asp-action="Index" asp-controller="Cars">View All</a>)</small></h4>
        </div>
        <div class="col-2">
            <form class="form-inline my-2" asp-action="Index" asp-controller="Cars" method="get">
                <div class="form-group">
                    <input type="text" class="form-control mr-sm-2" placeholder="Search Inventory" name="search" />
                    <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
                </div>
            </form>
        </div>
        <table class="table table-striped mt-3 table-bordered">
            <thead class="thead-dark" style="font-size: 14px; font-weight: 300;">
                <tr>
                    <th></th>
                    <th>VIN</th>
                    <th>Year</th>
                    <th>Make</th>
                    <th>Model</th>
                    <th>Mileage</th>
                    <th>Purchase Price</th>
                    <th>Purchase Date</th>
                    <th>Lot Date</th>
                    <th>Sold To / Date</th>
                    <th><a asp-action="Create" asp-controller="Cars" class="btn-success btn float-right">Add Car</a></th>
                </tr>
            </thead>
            <tbody>
                @foreach (var car in Model.Cars)
                {
                    <tr>
                        @if (car.MainPhoto != null)
                        {
                            <td>
                                <img src="@car.MainPhoto.ImageUrl" height="100" width="100" />
                            </td>
                        }
                        else
                        {
                            <td>No Photo</td>
                        }
                        <td>@car.VIN</td>
                        <td>@car.Year</td>
                        <td>@car.Make</td>
                        <td>@car.Model</td>

                        <td>@car.Mileage</td>
                        <td>@car.PurchasePrice.ToString("c")</td>
                        <td>@car.PurchaseDate.ToShortDateString()</td>
                        <td>@car.LotDate.ToShortDateString()</td>
                        @if (car.Invoice != null)
                        {
                            <td>@car.Invoice.CustomerName @car.Invoice.DateSold.ToShortDateString()</td>
                        }
                        else
                        {
                            <td></td>
                        }
                        <td>
                            <a asp-action="Details" asp-controller="Cars" asp-route-id="@car.CarId">View</a> |
                            <a asp-action="Edit" asp-controller="Cars" asp-route-id="@car.CarId">Edit</a> |
                            <a asp-action="ConfirmDelete" asp-controller="Cars" asp-route-id="@car.CarId" class="text-danger">Delete</a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>

        @if (Model.Pagination.TotalPages > 1)
        {
            <nav aria-label="Page navigation example">
                <ul class="pagination">
                    <li class="page-item">
                        <a class="page-link" asp-ation="Index" asp-route-page="1">First Page</a>
                    </li>
                    <li class="page-item">
                        <a class="page-link" asp-ation="Index" asp-route-page="@Model.Pagination.PrevPage">Prev</a>
                    </li>



                    <li class="page-item">
                        <a class="page-link" asp-ation="Index" asp-route-page="@Model.Pagination.NextPage">Next</a>
                    </li>
                    <li class="page-item">
                        <a class="page-link" asp-ation="Index" asp-route-page="@Model.Pagination.LastPage">Last Page</a>
                    </li>
                </ul>
            </nav>
        }

    </div>

</div>